/*	Curve extension for canvas 2.1
 *	Epistemex (c) 2013-2014
 *	License: MIT
*/
CanvasRenderingContext2D.prototype.curve=function(g,q,e,b){q=(typeof q==="number")?q:0.5;e=e?e:20;var h,j=[],d=g.length,c,a=[];h=g.slice(0);if(b){h.unshift(g[d-1]);h.unshift(g[d-2]);h.push(g[0],g[1])}else{h.unshift(g[1]);h.unshift(g[0]);h.push(g[d-2],g[d-1])}a.push([1,0,0,0]);for(c=1;c<e;c++){var k=c/e,m=k*k,o=m*k,n=o*2,p=m*3;a.push([n-p+1,p-n,o-2*m+k,o-m])}a.push([0,1,0,0]);f(h,a);if(b){h=[];h.push(g[d-4],g[d-3],g[d-2],g[d-1]);h.push(g[0],g[1],g[2],g[3]);f(h,a)}function f(y,r){for(var s=2;s<=d;s+=2){var u=y[s],v=y[s+1],w=y[s+2],x=y[s+3],A=(w-y[s-2])*q,B=(x-y[s-1])*q,C=(y[s+4]-u)*q,D=(y[s+5]-v)*q;for(var z=0;z<=e;z++){var l=r[z];j.push(l[0]*u+l[1]*w+l[2]*A+l[3]*C,l[0]*v+l[1]*x+l[2]*B+l[3]*D)}}}for(c=0,d=j.length;c<d;c+=2){this.lineTo(j[c],j[c+1])}return j};