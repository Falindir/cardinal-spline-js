<!DOCTYPE html>
<html>

<!-- *******************************************************************
	 **	    Cardinal spline for canvas extension demo.
	 **
	 **	    (c) Epistemex (www.epistemex.com).
	 ** 	License: MIT. May be used in any project.
	 *******************************************************************
-->
<head>
	<title>Canvas cardinal (smooth) curve extension - Epistemex</title>

	<style>
		body {
			width:100%;
			padding:0;
			margin:0;
			font:16px sans-serif;
			color:#ccd;
			background-color:#333;
			}
		h1 {
			font-size:40px;
			font-weight: normal;
			margin:20px 0;
			color:#fff;
			}
		#container {
			width:800px;
			margin:0 auto;
			}
		#demoCanvas {
			background-color: #ddd;
			margin-bottom:12px;
			}
		.options {
			font-size:12px;
			padding:9px 5px 9px 5px;
			background-color:#555;
			color:#fff;
			width:790px;
			margin:0;
			}
		.options>input[type=text] {
			width:30px;
			margin-left:5px;
			text-align:center;
			border:1px solid #fff;
			}
		button {
			border:0;
			background: rgb(187, 200, 248);
			color:#000;
			padding:5px 9px 4px 9px;
			float:right;
			margin:0 4px 0 0;
			}
		.options>label {
			margin-left:12px;
			}
		a {
			color:#fff;
			text-decoration: none;
			}
		a:hover {
			color:#ffa;
			text-decoration: underline;
			}
		.footerl {
			float:left;
			}
		.footerr {
			float:right;
			}
	</style>
</head>
<body>

	<div id="container">

		<h1>Smooth curves on canvas</h1>

		<p>Draw smooth curves (cardinal splines) through points without any control points or calculated pseudo-points.</p>

		<!-- Option panel -->
		<div class="options">
			<label for="numTension">Tension:</label>
			<input id="numTension" type="text" value="0.5" maxlength="4" autofocus onkeyup="drawCurveDemo()" />

			<label for="numSegments">Segments:</label>
			<input id="numSegments" type="text" value="20" maxlength="2" onkeyup="drawCurveDemo()" />

			<label for="chkClosed">Closed:</label>
			<input id="chkClosed" type="checkbox" checked onchange="drawCurveDemo()">

			<label for="chkPoints">Points:</label>
			<input id="chkPoints" type="checkbox" checked onchange="drawCurveDemo()">

			<button onclick="randomize();drawCurveDemo()">Randomize</button>
		</div>

		<canvas id="demoCanvas" width="800" height="400"></canvas>

		<div class="footerl">
			&copy; by <a href="http://github.com/epistemex/">Epistemex</a>.
			<a href="https://github.com/epistemex/cardinal-spline-js/tree/master">Cardinal spline</a> is licensed under MIT.
		</div>
		<div class="footerr">
			<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIgAAAAUCAMAAABhwIVYAAAATlBMVEUAAAB5eXmVlZWUlJSVlZWQkJCVlZWVlZWVlZWVlZV4eHiVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZVvb2+Dg4OXl5eBgYGGhobUx4KpAAAAFHRSTlMAQpwsgEFrIP6QIRDqw66IBozw1G3ou+sAAAGLSURBVEjH7ZTbbsMgDIY9wkGUnNr+O73/iw5qHNOIattNlUn7Lgqxi/lqR6XXHid6Lh7XY4hcYI4hYo4ikvkbIi5W5rSahbdnS5TmVPppkTGxPN8S5/JN8mc5tLpoSLHRaUXjhtkS40oNeulBTIQQAhQaMFATCKlN6nbNppN6ALGpaGmsSQekvHz2GOQsCQGemAn5IZDZcqg7WS7t3QhUwRVWKkolsAcV3nqcOiLSSM8i45bznClB9ZLzgOqqiJpUj+9Fwo2h6YhhkQifOMW0IoEhi0QY6ylfRaRiYUaGfiIiUMDVxkwJ8Z3YGO5ERj1kEW4GRGt+YhHBUYFP/240wrzdOfBvA+47MupoWFjmJaNRsoYo0UeP0+OXVe70kqu7/jsSODAi9ERuEmLiOnjqv6ytSNxy007kshOxmLhLKqIeurz3qHNbIAP3Ccu9iAOmJcazyeuuIxf9HwkcAWeWtiILcH4unz2CNF3w6340FK6cGr0GuUFC8jUki28qOvaoJv6hyLP5FzmuyBeJukOBxP+h7AAAAABJRU5ErkJggg==">
		</div>
	</div>

<script src="../curve.min.js"></script>
<script>

	var	canvas = document.getElementById('demoCanvas'),
		ctx = canvas.getContext("2d"),
		w = canvas.width,
		h = canvas.height,
		pts = [];

	ctx.translate(0.5, 0.5);
	ctx.lineJoin = 'round';

	randomize();
	drawCurveDemo();

	/*
	 *	Randomize points
	*/
	function randomize() {

		var numOfPoints = 5; //min. 2

		pts = [];

		for(var i = 0; i < numOfPoints; i++) {
			pts.push((w * Math.random() * 0.9 + w * 0.05)|0,
					 (h * Math.random() * 0.9 + h * 0.05)|0);
		}
	}

	/*
	 *	Collect options
	 */
	function CurveOptions() {

		var seg = parseFloat(document.getElementById('numSegments').value);
		if (isNaN(seg)) seg = 1;
		if (seg < 1) seg = 1;
		if (seg > 99) seg = 99;

		var tension = parseFloat(document.getElementById('numTension').value);
		if (isNaN(tension)) tension = 0;
		if (tension < -9) tension = -9;
		if (tension > 9) tension = 9;

		this.closed = document.getElementById('chkClosed').checked;
		this.segments = seg;
		this.tension = tension;

		return this;
	}

	/*
	 *	Draw curve with current settings and points
	 */
	function drawCurveDemo() {

		ctx.clearRect(0, 0, w, h);

		// get current options
		var o = new CurveOptions();

		// draw our cardinal spline
		ctx.beginPath();
		ctx.moveTo(pts[0], pts[1]);
		ctx.curve(pts, o.tension, o.segments, o.closed);
		ctx.strokeStyle = '#6677cc';
		ctx.lineWidth = 3;
		ctx.stroke();

		// show original points
		if (document.getElementById('chkPoints').checked) {
			ctx.lineWidth = 1;
			for(var i = 0; i < pts.length; i += 2) {
				if (i === 0)
					ctx.strokeStyle = '#0f0';
				else if (i === pts.length - 2)
					ctx.strokeStyle = 'rgba(255,0,0,0.7)';
				else
					ctx.strokeStyle = 'rgba(0,0,0,0.7)';

				ctx.strokeRect(pts[i] - 2, pts[i+1] - 2, 4, 4);
			}
		}
	}

</script>
</body>
</html>
